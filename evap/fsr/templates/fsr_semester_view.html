{% extends "fsr_base.html" %}

{% load i18n %}
{% load static %}
{% load morefilters %}

{% block content %}
    {{ block.super }}
    {% if courses %}
        <table class="full-width">
            <tr>
                <th colspan="2">&nbsp;</th>
                <th>{% trans "Name" %}</th>
                <th>{% trans "State" %}</th>
                <th colspan="2">{% trans "Votes" %}</th>
                <th>{% trans "Actions" %}</th>
            </tr>
            
            {% for course in courses %}
                <tr class="{% cycle "odd" "even" %}">
                    <td>
                        {% if not course.visible %}
                            <img src="{% get_static_prefix %}images/silk/lock.png" title="{% trans "Course is not visible." %}">
                        {% endif %}
                    </td>
                    <td>
                        {% with course.warnings as warnings %}
                            {% if warnings %}
                                <img src="{% get_static_prefix %}images/silk/exclamation.png" title="{{ warnings|join:" " }}">
                            {% endif %}
                        {% endwith %}
                    </td>
                    <td class="expand">{{ course.name }}</td>
                    <td>{{ course.state }}</td>
                    {% if course.num_participants %}
                        <td class="dontbreak right">{{ course.num_voters }} / {{ course.num_participants }}</td>
                        <td class="dontbreak">({{ course.num_voters|percentage:course.num_participants }})</td>
                    {% else %}
                        <td class="center" colspan="2">&mdash;</td>
                    {% endif %}
                    <td class="dontbreak">
                        {% if course.can_fsr_edit %}
                            <a href="{% url fsr.views.course_edit semester.id, course.id %}" title="{% trans "Edit" %}"><img src="{% get_static_prefix %}images/silk/application_edit.png"></a>&nbsp;
                        {% endif %}
                        
                        <a href="{% url fsr.views.course_email semester.id, course.id %}" title="{% trans "Email" %}"><img src="{% get_static_prefix %}images/silk/email_edit.png"></a>&nbsp;
                        {% if course.can_fsr_delete %}
                            <a href="{% url fsr.views.course_delete semester.id, course.id %}" title="{% trans "Delete" %}"><img src="{% get_static_prefix %}images/silk/application_delete.png"></a>&nbsp;
                        {% endif %}
                        {% if course.can_fsr_review %}
                            <a href="{% url fsr.views.course_censor semester.id, course.id %}" title="{% trans "Censor" %}"><img src="{% get_static_prefix %}images/silk/application_lightning.png"></a>
                        {% endif %}
                        {% if course.state == "new" %}
                            <a href="{% url fsr.views.course_lecturer_ready semester.id, course.id %}" title="{% trans "Enable for Lecturer Review"%}">Lecturer Review</a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>{% trans "There are no courses for this semester yet." %}</p>
    {% endif %}
{% endblock %}
